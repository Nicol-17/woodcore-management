<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Oswald:wght@200;700&family=Roboto+Mono:wght@700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" type="text/css" href="css/dashboard.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <title>Dashboard</title>
  </head>

  <body>
    <section class="padre-primordial">
      <!-- Sección de aside -->
      <nav class="_nav">
        <ul class="nav__list">
            <!-- elemento home -->
            <li class="nav__item">
                <figure class="nav__figure">
                    <img src="/img/svg/home.svg" class="nav__img">
                </figure>

                <article class="nav-show">
                    <a class="nav-name" href="/dashboard">
                        Inicio
                    </a>
                </article>
            </li>

            <li class="nav__item">
                <figure class="nav__figure">
                    <img src="/img/svg/setting.svg" class="nav__img">
                </figure>

                <article class="nav-show">
                    <a class="nav-name" href="#">
                        Configuración
                    </a>
                </article>
            </li>

            <li class="nav__item" id="logout-button">
                <figure class="nav__figure">
                    <img src="img/svg/Login_icon-icons.com_52028.svg" class="nav__img" alt="Cerrar Sesión">
                </figure>
                <article class="nav-show">
                    <a class="nav-name" href="/login">
                        Cerrar Sesión
                    </a>
                </article>
            </li>

            <li class="nav__item nav__item--down">
                <figure class="nav__figure">
                    <img src="/img/svg/help.svg" class="nav__img">
                </figure>

                <article class="nav-show">
                    <a class="nav-name" href="#">
                        Ayuda
                    </a>
                </article>
            </li>

            <li class="nav__item nav__item--user" id="editar-perfil-btn">
                <figure class="nav__figure">
                    <img src="/img/persona1.jpg" class="nav__img nav__img--avatar">
                </figure>

                <article class="nav-show">
                    <div class="nav-name nav__name--user">
                        <h4 class="nav__username" style="cursor: pointer;">Albert Wickman</h4>
                        <p class="nav__rol">Product Owner</p>
                    </div>
                </article>
            </li>


        </ul>
        <!-- contenedor del perfil -->

    </nav>
    <!-- contenedor principal -->
    
    <section class="container-main-content p-0">
        <!-- Sección de nav del dashboard -->
        <article class="container-d-n order-2 container-content-dashboard">
            <div class="d-flex justify-content-center">
                <nav class="navbar d-flex  justify-content-between w-75 rounded-pill ms-3 mt-2 ">
                    <ul class="d-flex align-items-center mb-0 nav__list--dashboard">
                        <li class="nav-item me-3"><a class="nav-link " href="#" id="verProyectos"> Ver
                                proyectos</a></li>
                        <li class="nav-item"><a class="nav-link " href="#" id="verTareas"> Ver
                                tareas </a></li>
                    </ul>
                    <div class="container-btn-crear-proyecto w-25 d-flex justify-content-end">
                        <a href="#" title="Crear un proyecto" id="abrir-form-proyecto">
                            <img src="img/svg/add-project-nav.svg" alt="Crear Proyecto" class="icon-task-nav me-3">
                        </a>
                    </div>
                </nav>
            </div>


            <!-- FORM PARA LA CREACIÓN DE PROYECTOS -->

            <dialog id="modal-form-project">
                <h2 class="text-dark">Añadir un Proyecto</h2>
                <form class="needs-validation" onsubmit="return validarProyecto()" id="form-project">
                    <!-- Nombre -->
                    <div class="mb-2">
                        <div class="col-sm-9 input-group border-bottom border-dark">
                            <input type="text" name="nombre_proyecto"
                                class="form-control bg-dark-x border-0 flex-grow-1 mb-2" id="nombre_proyecto"
                                placeholder="Nombre"  required>
                        </div>
                    </div>

                    <!-- Prioridad-->
                    <div class="mb-3">
                        <label for="Prioridad" class="form-label font-weight-bold">Prioridad :</label>
                        <div class="col-sm-9 input-group">
                            <select name="Prioridad" class="form-select" id="Prioridad" required>
                                <option value="">Seleccionar</option>
                                <option value="Urgente e importante">Urgente e importante</option>
                                <option value="Importante pero no urgente">Importante pero no urgente</option>
                                <option value="Urgente pero no importante">Urgente pero no importante</option>
                                <option value="Ni importante ni urgente">Ni urgente ni importante</option>
                            </select>
                        </div>
                    </div>

                    <!-- Sprint inicio -->
                    <div class="mb-3">
                        <label for="Sprint_inicio" class="form-label font-weight-bold">Fecha inicial:</label>
                        <div class="col-sm-9 input-group">
                            <input type="date" name="Sprint_inicio" class="form-control bg-dark-x border-0 flex-grow-1" id="Sprint_inicio" required>
                        </div>
                    </div>

                    <!-- Sprint Finalización -->
                    <div class="mb-3">
                        <label for="Sprint_final" class="form-label font-weight-bold">Fecha final:</label>
                        <div class="col-sm-9 input-group">
                            <input type="date" name="Sprint_final" class="form-control bg-dark-x border-0 flex-grow-1" id="Sprint_final" required>
                        </div>
                    </div>

                    <!-- Encargado del proyecto -->
                    <div class="mb-3">
                        <div class="col-sm-9 input-group border-bottom border-dark">
                            <input type="text" name="encargado_proyecto"
                                class="form-control bg-dark-x border-0 flex-grow-1 mb-2" id="encargado_proyecto"
                                placeholder="Encargado del proyecto" minlength="6" required>
                        </div>
                    </div>


                    
                    <!-- boton de crear proyecto-->
                    <button type="submit" class="btn bg-black w-100 text-white mb-1" id="btnAlerta">Crear
                        Proyecto</button>
                    </form>
                    <button class="btn bg-black w-100 text-white mb-1" id="cerrar-form-proyecto">volver
                    </button>
        

            </dialog>


            
            <!-- FORM PARA EDICION DE PROYECTOS -->                                
            <dialog id="modal-edit-project-form" class="rounded-top">
                                <!-- Contenido del formulario -->
                                <h2 class="text-dark text-center">Editar Proyecto</h2>
                                <form class="form-edit-project p-4">

                                    <!-- id proyecto -->
                                    <input type="hidden" id="id_proyecto" name="id_proyecto">
                                    
                                    <!-- Nombre -->
                                    <div class="mb-2">
                                        <div class="col-sm-9 input-group border-bottom border-dark">
                                            <input type="text" name="nombre_proyecto"
                                                class="form-control bg-dark-x border-0 flex-grow-1 mb-2" id="nombre_proyecto"
                                                placeholder="Nombre"  required>
                                        </div>
                                    </div>

                                    <!-- Prioridad-->
                                    <div class="mb-3">
                                        <label for="Prioridad" class="form-label font-weight-bold">Prioridad :</label>
                                        <div class="col-sm-9 input-group">
                                            <select name="Prioridad" class="form-select" id="Prioridad" required>
                                                <option value="">Seleccionar</option>
                                                <option value="Urgente e importante">Urgente e importante</option>
                                                <option value="Importante pero no urgente">Importante pero no urgente</option>
                                                <option value="Urgente pero no importante">Urgente pero no importante</option>
                                                <option value="Ni importante ni urgente">Ni urgente ni importante</option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Sprint inicio -->
                                    <div class="mb-3">
                                        <label for="Sprint_inicio" class="form-label font-weight-bold">Fecha inicial:</label>
                                        <div class="col-sm-9 input-group">
                                            <input type="date" name="Sprint_inicio" class="form-control bg-dark-x border-0 flex-grow-1" id="Sprint_inicio" required>
                                        </div>
                                    </div>

                                    <!-- Sprint Finalización -->
                                    <div class="mb-3">
                                        <label for="Sprint_final" class="form-label font-weight-bold">Fecha final:</label>
                                        <div class="col-sm-9 input-group">
                                            <input type="date" name="Sprint_final" class="form-control bg-dark-x border-0 flex-grow-1" id="Sprint_final" required>
                                        </div>
                                    </div>

                                    <!-- Encargado del proyecto -->
                                    <div class="mb-3">
                                        <div class="col-sm-9 input-group border-bottom border-dark">
                                            <input type="text" name="encargado_proyecto"
                                                class="form-control bg-dark-x border-0 flex-grow-1 mb-2" id="encargado_proyecto"
                                                placeholder="Encargado del proyecto" minlength="6" required>
                                        </div>
                                    </div>


                                    <!-- boton de editar proyecto-->
                                    <button type="submit" class="btn edit-project-button bg-black w-100 text-white mb-1"
                                        id="btnAlerta">Guardar Proyecto</button>
                                        
                                    </form>
                                    <!-- botones para cerrar el form -->
                                    <div class="btns-tasks">
                                        <button type="submit" class="btn bg-danger w-100 text-white mb-1 "
                                            id="delete-project">Eliminar proyecto
                                        </button>

                                        <button class="btn bg-black w-100 text-white mb-1"
                                            id="cerrar-form-proyecto-edit">Volver
                                        </button>
                                    </div>
            </dialog>


            <!-- Form para la creación de tareas -->
            <dialog id="modal-form">
                <h2 class="text-dark">Añadir una tarea</h2>
                <form class="form-tasks" onsubmit="return validarTarea()">

                    <!-- inputs del formulario -->
                    <div class="container-form-tasks-content d-flex p-3">

                        <!-- id proyecto -->
                        <input type="hidden" id="id_proyecto" name="id_proyecto" value="${proyectoSeleccionado}">

                        <!-- Nombre tarea -->
                        <div class="form-task-section-1 d-flex flex-column me-4 w-100">
                            <label for="nombre_task"> Nombre de la tarea:</label>
                            <input type="text" id="nombre_task" name="nombre_task"
                                class="mb-3 form-control border-0" required>

                            <!-- Prioridad de la tarea -->
                            <label for="prioridad"> Prioridad de la tarea:</label>
                            <select name="prioridad" id="prioridad" class="form-select" required>
                                <option value="Urgente e importante">Urgente e importante</option>
                                <option value="Importante pero no urgente">Importante pero no urgente </option>
                                <option value="Urgente pero no importante">Urgente pero no importante</option>
                                <option value="Ni urgente ni importante">Ni urgente ni importante</option>
                            </select>

                            <!-- Descripción de la tarea -->
                            <div class="des-task mb-3 mt-3">
                                <label for="des_tasks">Descripción de la tarea:</label>

                                <textarea id="des_tasks" cols="30" rows="10" name="des_tasks" required></textarea>
                            </div>
                        </div>

                        <div class="form-task-section-2 d-flex flex-column w-100">

                            <!-- Encargado -->
                            <label for="encargado"> Encargado de la tarea:</label>
                            <input type="text" id="encargado" name="encargado" class="form-control border-0" required>

                            <!-- fecha límite de la tarea -->
                            <label for="sprint_task"> Fecha límite:</label>
                            <input type="date" id="sprint_task" name="sprint_task" class="form-control" required>
                        </div>
                    </div>

                    <!-- Botones del form -->
                    <div class="btns-tasks d-inline-flex justify-content-center">
                        <button  type="submit" class="me-4 btn btn-lg">Crear tarea</button>
                    </div>
                </form>
                <!-- botón para cerrar el form -->
                <div class="btns-tasks d-inline-flex justify-content-center">
                    <button class="btn btn-lg" id="cerrar-form">Volver</button>
                </div>
            </dialog>


            
            <!-- ///////////////////////////////////////// -->
            <!-- Form para la edición de tareas -->
            <dialog id="modal-edit-task-form">
                <h2 class="text-dark">Modificar tarea</h2>
                <form class="form-edit-tasks">

                    <!-- inputs del formulario -->
                    
                    <!-- id proyecto -->
                    <input type="hidden" id="id_proyecto" name="id_proyecto" value="${proyectoSeleccionado}">

                    <!-- id tarea -->
                    <input type="hidden" id="id_task" name="id_task">

                    <div class="container-form-tasks-content d-flex p-3">
                        <!-- Nombre tarea -->
                        <div class="form-task-section-1 d-flex flex-column me-4 w-100">
                            <label for="nombre_task"> Nombre de la tarea:</label>
                            <input type="text" id="nombre_task" name="nombre_task"
                                class="mb-3 form-control border-0" required>

                            <!-- Prioridad de la tarea -->
                            <label for="prioridad"> Prioridad de la tarea:</label>
                            <select name="prioridad" id="prioridad" class="form-select" required>
                                <option value="Urgente e importante">Urgente e importante</option>
                                <option value="Importante pero no urgente">Importante pero no urgente </option>
                                <option value="Urgente pero no importante">Urgente pero no importante</option>
                                <option value="Ni urgente ni importante">Ni urgente ni importante</option>
                            </select>

                            <!-- Descripción de la tarea -->
                            <div class="des-task mb-3 mt-3">
                                <label for="des_tasks">Descripción de la tarea:</label>

                                <textarea id="des_tasks" cols="30" rows="10" name="des_tasks" required></textarea>
                            </div>
                        </div>

                        <div class="form-task-section-2 d-flex flex-column w-100">
                            
                            <!-- Encargado -->
                            <label for="encargado"> Encargado de la tarea:</label>
                            <input type="text" id="encargado" name="encargado" class="form-control border-0" required>

                            <!-- fecha límite de la tarea -->
                            <label for="sprint_task"> Fecha límite:</label>
                            <input type="date" id="sprint_task" name="sprint_task" class="form-control" required>
                        </div>
                    </div>

                    <!-- Botones del form -->
                    <div class="d-inline-flex justify-content-center">
                        <button type="submit" id="button_edit_task" class="btn-save-task me-4 btn btn-lg mb-3">Guardar Tarea</button>
                    </div>
                </form>
                <!-- botón para cerrar el form -->
                <div class="btns-tasks d-inline-flex justify-content-center">
                    <button class="btn btn-lg me-4 btn-close-modal-edit" id="close-edit-form">Volver</button>
                    <button type="submit" class="btn btn-lg btn-danger" id = "delete-task">Eliminar tarea</button>
                </div>
            </dialog>
            

            <!-- Parte del dashboard -->
            <h2 class="text-center mb-3 " id="title-dashboard"></h2>
            <div class="container-dashboard" id="container-dashboard">
                <div>
                    <h4 class="text-center title-tasks"> Tareas sin hacer</h4>
                    <div class="container-task sinHacer me-2 ms-3 p-1" id="sinHacer">
                        
                        <button class="btn-task abrir-form">
                            <img src="../img/svg/plus-square.svg" class="icon-btn">
                            Agregar Tarea
                        </button>

                    </div>
                </div>

                <div>
                    <h4 class="text-center title-tasks">Tareas en Proceso</h4>
                    <div class="container-task Haciendo me-2 d-flex flex-column  p-1" id="Haciendo">
                        <button class="btn-task abrir-form">
                            <img src="../img/svg/plus-square.svg" class="icon-btn">
                            Agregar Tarea
                        </button>
                        <div class="task d-flex flex-column flex-wrap align-content-between rounded-top me-2 mb-2 "
                            draggable="true">
                            <!-- <img src="../img/svg/task-icon.svg" class="task-icon align-self-center me-2"> -->
                            <div class="container-heading-task d-flex w-100  align-items-center">
                                <img src="../img/persona4.jpg" class="rounded-circle nav__img--avatar ms-2">
                                <div class="d-flex flex-column ms-1 align-items-start w-50">
                                    <p class="mb-0 pt-2 fw-bold">Altman Benice</p>
                                    <p class="t-encargado">Encargado</p>
                                </div>
                                <div class="d-flex flex-column align-items-end me-3 w-50">
                                    <p class="mb-0 mt-2 t-fecha">Fecha límite</p>
                                    <p class="fecha me-1">03/04/2024</p>
                                </div>
                                <!-- Botón para abrir el modal de modificación de tareas -->
                                <button class="btn-abrir-form-edit-tasks align-self-start">
                                    <img src="../img/edit.png" class="edit-task-icon">
                                </button>
                                
                                
                            </div>
                            <div class="desc-task d-flex flex-column justify-content-center ms-2">
                                <div class="d-flex mb-2 mt-2">
                                    <p class="mb-0 fw-bold fs-5 mt-3 name-task">Hacer issue de drag and drop y
                                        además terminar el hover</p>
                                    <p
                                        class="mb-0 text-wrap bg-success rounded-pill text-center state ms-1 me-1 flex-shrink-0 align-self-center">
                                        activa</p>
                                </div>
                                <p class="mb-2"><b>Descripción:</b> Lorem ipsum dolor sit amet consectetur
                                    adipisicing elit. Repellat beatae tempore a quaerat harum voluptatem unde vel,
                                    cupiditate </p>
                                <div class="container-prioridad d-flex">
                                    <p class="mb-1 me-2"><b>Prioridad:</b></p>
                                    <p class="category text-wrap w-50 rounded-pill text-center mb-0">Urgente e
                                        importante</p>
                                </div>

                            </div>
                            <div class="states d-flex mt-4 justify-content-between align-items-end ms-3">
                                <div class="first-state rounded-pill  w-50 me-1"></div>
                                <div class="second-state rounded-pill  w-50 me-1"></div>
                                <div class="third-state rounded-pill  w-50"></div>
                            </div>
                        </div>


                    </div>
                </div>

                <div>
                    <h4 class="text-center title-tasks">Tareas Realizadas</h4>
                    <div class="container-task taskHecho me-2 p-1" id="taskHecho">
                        <button class="btn-task abrir-form">
                            <img src="../img/svg/plus-square.svg" class="icon-btn">
                            Agregar Tarea
                        </button>
                    </div>
                </div>
            </div>

            <!-- ESTRUCTURA PARA EL DASHBOARD DE PROYECTOS  -->

            <div class="container-dashboard-projects" id="container-dashboard-projects">
                <div class="container-projects">
                    <!-- proyectos -->

                    <div class="container-project d-flex ms-4">
                        <!-- img cover -->
                        <div class="container-img-cover">
                            <div class="content">
                                <a class="text-img-cover" href="#">Ver detalles del proyecto</a>
                            </div>
                        </div>
                        <!-- container de la info del proyecto -->
                        <div class="proyecto container-info-project">
                            <!-- container del head con la info del equipo -->
                            <div class="container-equipo d-flex justify-content-start ms-2">
                                <!-- persona 01 -->
                                <div class="contaiener-persona d-flex flex-column align-items-center mt-2 me-2">
                                    <img src="/img/persona05.jpg" class="img-persona rounded-circle">
                                    <p class="legend-persona mb-0">Luis</p>
                                </div>

                                <!-- persona 02 -->
                                <div class="contaiener-persona d-flex flex-column align-items-center mt-2 me-2">
                                    <img src="/img/persona07.jpg" class="img-persona rounded-circle">
                                    <p class="legend-persona mb-0">Pedro</p>
                                </div>

                                <!-- persona 03 -->
                                <div class="contaiener-persona d-flex flex-column align-items-center mt-2 me-2">
                                    <img src="/img/persona4.jpg" class="img-persona rounded-circle">
                                    <p class="legend-persona mb-0">Alfonso</p>
                                </div>

                                <!-- persona 04 -->
                                <div class="contaiener-persona d-flex flex-column align-items-center mt-2 me-2">
                                    <img src="/img/persona3.jpg" class="img-persona rounded-circle">
                                    <p class="legend-persona mb-0">Jessica</p>
                                </div>
                                <!-- Botón Editar proyecto -->
                                <button class="btn-abrir-edit-project align-self-start">
                                    <img src="img/edit.png" alt="Editar proyecto" class="edit-project-icon">
                                </button>

                                
                            </div>


                                                                        
                            
                            <!-- container de la info principal -->
                            <div class="container-main-info d-flex flex-column align-content-between me-1 ms-2 mt-1">
                                <div class="container-name-project d-flex">
                                    <p class="fs-4 fw-bold name-project mb-0">Crear app movil</p>
                                    <p class="state-project mb-0 text-wrap bg-success rounded-pill text-center state ms-1 me-1 flex-shrink-0 align-self-center">Activo</p>
                                </div>
                                
                                <div class="container-desc-project">
                                    <p class="desc-project mb-0">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Odio quidem officiis deleniti odit doloremque enim autem exercitationem perspiciatis quis. Quas quis nulla soluta dolorum, possimus dolorem aliquam ea porro hic?</p>
                                </div>


                                
                                <div class="container-progress-project">
                                    <p class="legend-progress mb-0">Progreso 100%</p>
                                    <div class="progress bg-success"></div>
                                </div>
                                
                            </div>
                        </div>
                        
                        
                    </div>
                <!-- Botón Generar Reporte -->
                    <button  class="btn btn-dark " id="generarReporte"  title="Generar un reporte en PDF">
                        <i class="bi bi-file-earmark-arrow-down-fill fs-4"></i>
                    </button>
                    
                </div>
            </div>



            
            
        </article>
    </section>
    
    <div id="crearTareas"></div>

    <!-- script de funcionalidad de las tareas -->
    <script src="js/main.js" type="module"></script>

    <!-- script de bootstrap -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <!-- script de alerta -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- script de validacion formulario proyectos -->
    <script>
      function validarProyecto() {
        var InputNombre = document
          .getElementById("nombre_proyecto")
          ?.value.trim();
        var prioridad = document.getElementById("Prioridad")?.value.trim();
        var sprint = document.getElementById("Sprint_inicio")?.value.trim();
        var Sprint_final = document
          .getElementById("Sprint_final")
          ?.value.trim();
        var encargadoProyecto = document
          .getElementById("encargado_proyecto")
          ?.value.trim();

        if (
          !InputNombre ||
          !prioridad ||
          !sprint ||
          !Sprint_final ||
          !encargadoProyecto
        ) {
          alert("Por favor completa todos los campos obligatorios.");
          return false;
        } else {
          Swal.fire("Proyecto creado exitosamente!");
        }
        return true;
      }
    </script>

    <!-- Script de la validacion formulario tareas -->
    <script>
      function validarTarea() {
        var nombre_task = document.getElementById("nombre_task").value;
        var prioridad = document.getElementById("prioridad").value;
        var des_task = document.getElementById("des_tasks").value;
        var encargado = document.getElementById("encargado").value;
        var sprint_task = document.getElementById("sprint_task").value;

        if (
          nombre_task.trim() === "" ||
          prioridad === "" ||
          des_task.trim() === "" ||
          encargado.trim() === "" ||
          sprint_task.trim() === ""
        ) {
          alert("Por favor completa todos los campos obligatorios.");
          return false;
        } else {
          Swal.fire("Tarea creada exitosamente!");
        }
        return true;
      }
    </script>

     <!-- Bootstrap 5 y SweetAlert2 -->
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


    <!-- script de bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>


    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- <script>
        document.addEventListener("DOMContentLoaded", function () {
            const usuarioId = localStorage.getItem("userId");
            console.log("Usuario ID obtenido:", usuarioId); // Depuración

            if (!usuarioId) {
                alert("No se encontró el usuario. Inicia sesión nuevamente.");
                window.location.href = "/login";
                return;
            }

            // Hacer la petición al backend para obtener proyectos del usuario
            fetch(`http://localhost:8080/project/mis-proyectos/${usuarioId}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Error HTTP: ${response.status}`);
                    }
                    return response.json();
                })
                .then(proyectos => {
                    console.log("Proyectos obtenidos del backend:", proyectos); // Depuración

                    const container = document.querySelector(".container-projects");
                    container.innerHTML = ""; // Limpiar antes de agregar nuevos proyectos

                    if (!Array.isArray(proyectos)) {
                        console.error("Error: La API no devolvió una lista de proyectos.", proyectos);
                        container.innerHTML = "<p>Error al cargar proyectos.</p>";
                        return;
                    }

                    if (proyectos.length === 0) {
                        container.innerHTML = "<p>No tienes proyectos aún.</p>";
                        return;
                    }

                    proyectos.forEach(proyecto => {
                        const projectElement = document.createElement("div");
                        projectElement.classList.add("container-project", "d-flex", "align-items-center", "ms-4", "position-relative", "p-4", "border", "rounded", "shadow-sm");

                        projectElement.innerHTML = `
            <div class="container-img-cover me-1 flex-shrink-0" style="width: 40%; height: 100%; overflow: hidden;">
                <div class="content w-100 h-100 d-flex align-items-center justify-content-center">
                    <a class="text-img-cover" href="#">Ver detalles del proyecto</a>
                </div>
            </div>
            <div class="proyecto container-info-project flex-grow-1 text-center">
                <button class="btn position-absolute top-0 end-0 mt-2 me-2" onclick="abrirModalEditarProyecto(${proyecto.id_proyecto})">
                    <img src="img/svg/add-project.svg" alt="Editar Proyecto" class="icon-task-nav">
                </button>
                <h3 class="fw-bold text-primary">${proyecto.nombre_proyecto}</h3>
                <p class="text-light mb-1"><strong>Prioridad:</strong> ${proyecto.prioridad}</p>
                <p class="text-light mb-1"><strong>Encargado:</strong> ${proyecto.encargado_proyecto}</p>
                <p class="text-light mb-1"><strong>Fecha Inicio:</strong> ${proyecto.sprint_inicio}</p>
                <p class="text-light"><strong>Fecha Fin:</strong> ${proyecto.sprint_final}</p>
            </div>
        `;

                        container.appendChild(projectElement);
                    });
                })
                .catch(error => {
                    console.error("Error cargando proyectos:", error);
                    const container = document.querySelector(".container-projects");
                    container.innerHTML = "<p>No se pudieron cargar los proyectos.</p>";
                });

            document.getElementById("logout-button").addEventListener("click", function () {
                localStorage.removeItem("usuarioId");
                window.location.href = "/login";


            });
        });
    </script> 




    <script>

        document.addEventListener("DOMContentLoaded", function () {
            const userId = localStorage.getItem("userId");

            console.log("User ID en localStorage:", userId); // 🔹 Verificar en consola

            if (!userId) {
                Swal.fire({
                    icon: "error",
                    title: "Error",
                    text: "No hay usuario logueado. Redirigiendo a inicio de sesión...",
                    confirmButtonColor: "#d33",
                    confirmButtonText: "OK"
                }).then(() => {
                    window.location.href = "/login"; // Redirigir si no hay sesión
                });
                return;
            }

            const modalElement = document.getElementById("perfil-modal");
            const modal = new bootstrap.Modal(modalElement);

            // Abrir el modal y cargar los datos del usuario cada vez que se abre
            document.getElementById("editar-perfil-btn").addEventListener("click", function () {
                console.log("Intentando abrir el modal con usuario ID:", userId);

                fetch(`http://localhost:8080/crudusuario/${userId}?nocache=${new Date().getTime()}`)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error("Error al obtener usuario");
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log("Datos del usuario obtenidos:", data);

                        if (data) {
                            document.getElementById("nombre").value = data.nombre_usuario || "";
                            document.getElementById("telefono").value = data.telefono_usuario || "";
                            document.getElementById("correo").value = data.correo || "";
                            document.getElementById("contraseña").value = data.contraseña || "";
                        }

                        // Mostrar el modal después de cargar los datos
                        modal.show();
                    })
                    .catch(error => {
                        console.error("Error al obtener datos del usuario:", error);

                        Swal.fire({
                            icon: "error",
                            title: "Error",
                            text: "No se pudieron cargar los datos del usuario.",
                            confirmButtonColor: "#d33",
                            confirmButtonText: "OK"
                        });
                    });
            });

            // Actualizar usuario con SweetAlert2
            document.getElementById("perfil-form").addEventListener("submit", function (event) {
                event.preventDefault();

                const usuarioActualizado = {
                    id: userId,
                    nombre_usuario: document.getElementById("nombre").value,
                    telefono_usuario: document.getElementById("telefono").value,
                    correo: document.getElementById("correo").value,
                    contraseña: document.getElementById("contraseña").value
                };

                fetch(`http://localhost:8080/crudusuario/${userId}`, {
                    method: "PUT",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(usuarioActualizado)
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error("Error en la actualización");
                        }
                        return response.text();
                    })
                    .then(message => {
                        console.log("Respuesta del backend:", message);

                        Swal.fire({
                            icon: "success",
                            title: "¡Usuario actualizado!",
                            text: "Tu información se ha actualizado correctamente.",
                            confirmButtonColor: "#3085d6",
                            confirmButtonText: "OK"
                        }).then(() => {
                            modal.hide();
                        });

                    })
                    .catch(error => {
                        console.error("Error al actualizar usuario:", error);

                        Swal.fire({
                            icon: "error",
                            title: "Error",
                            text: "No se pudo actualizar el usuario. Inténtalo de nuevo.",
                            confirmButtonColor: "#d33",
                            confirmButtonText: "OK"
                        });
                    });
            });

            // Eliminar usuario con confirmación de SweetAlert2
            document.getElementById("eliminar-usuario-btn").addEventListener("click", function () {
                Swal.fire({
                    title: "¿Estás seguro?",
                    text: "¡No podrás revertir esta acción!",
                    icon: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#d33",
                    cancelButtonColor: "#3085d6",
                    confirmButtonText: "Sí, eliminar",
                    cancelButtonText: "Cancelar"
                }).then((result) => {
                    if (result.isConfirmed) {
                        fetch(`http://localhost:8080/crudusuario/${userId}`, {
                            method: "DELETE"
                        })
                            .then(response => {
                                if (!response.ok) {
                                    throw new Error("Error al eliminar usuario");
                                }
                                return response.text();
                            })
                            .then(message => {
                                console.log("Usuario eliminado:", message);

                                Swal.fire({
                                    icon: "success",
                                    title: "Usuario eliminado",
                                    text: "Tu cuenta ha sido eliminada correctamente.",
                                    confirmButtonColor: "#3085d6",
                                    confirmButtonText: "OK"
                                }).then(() => {
                                    localStorage.removeItem("userId"); // Eliminar ID del localStorage
                                    window.location.href = "/login"; // Redirigir al login
                                });
                            })
                            .catch(error => {
                                console.error("Error al eliminar usuario:", error);

                                Swal.fire({
                                    icon: "error",
                                    title: "Error",
                                    text: "No se pudo eliminar el usuario.",
                                    confirmButtonColor: "#d33",
                                    confirmButtonText: "OK"
                                });
                            });
                    }
                });
            });
        });




    </script> -->



    
</body>
</html>
